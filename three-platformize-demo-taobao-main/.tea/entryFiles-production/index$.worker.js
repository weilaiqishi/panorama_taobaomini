/**! __BUGME_START__ */ !function(){"use strict";var ERuntimeRemoteObjectType,ERuntimeRemoteObjectSubType;!function(e){e.Object="object",e.Function="function",e.Undefined="undefined",e.String="string",e.Number="number",e.Boolean="boolean",e.Symbol="Symbol",e.Bigint="bigint",e.Wasm="wasm"}(ERuntimeRemoteObjectType||(ERuntimeRemoteObjectType={})),function(e){e.Error="error",e.Array="array",e.Null="null"}(ERuntimeRemoteObjectSubType||(ERuntimeRemoteObjectSubType={}));var appxStackLine=/https:\/\/appx\/af-appx\.worker\.min\.js:\d+:\d+/,nativeScriptLine=/https:\/\/www\.alipay\.com\/?:\d+:\d+|\[native code\]/,pluginWorkerStackLine=/https:\/\/\d+\.hybrid\.\S+\.com\/__plugins__\/(\d+)\/index\.worker\.js:\d+:\d+/,appWorkerStackLine=/https:\/\/\d+\.hybrid\.\S+\.com\/index\.worker\.js:\d+:\d+/;function transformSourceUrl(e){try{return pluginWorkerStackLine.test(e)?e.replace(pluginWorkerStackLine,"Plugin-$1"):e.replace(appWorkerStackLine,"App")}catch(t){return e}}function formatStack(e){var t=e.split("\n"),n=t[0],s=t.slice(1).filter((function(e){return!appxStackLine.test(e)&&!nativeScriptLine.test(e)})).map(transformSourceUrl).map((function(e){return" "===e[0]?e:"    "+e}));return s.unshift(n),s.join("\n")}function error2RemoteObject(e){var t=e.name,n=e.message,s=e.stack;"string"!=typeof s&&(s=e.toString()),-1===s.indexOf(t)&&(s=e.toString()+"\n"+s);try{s=formatStack(s)}catch(e){}return{className:t,description:s,preview:{description:s,overflow:!1,properties:[{name:"stack",type:ERuntimeRemoteObjectType.String,value:s},{name:"message",type:ERuntimeRemoteObjectType.String,value:n}],subtype:ERuntimeRemoteObjectSubType.Error,type:ERuntimeRemoteObjectType.Object},subtype:ERuntimeRemoteObjectSubType.Error,type:ERuntimeRemoteObjectType.Object}}function isError(e){try{return"[object Error]"===Object.prototype.toString.call(e)}catch(e){return!1}}function getStartupParams(){if("undefined"!=typeof __appxStartupParams&&__appxStartupParams&&__appxStartupParams.appId)return __appxStartupParams;if("undefined"!=typeof my)try{return my.callSync("getStartupParams")||{}}catch(e){}return{}}var serverConfig={default:{domain:"hpmweb.alipay.com"},1:{domain:"hpmweb.alipay.com"}},ResponseEvent,RequestMethod,BreakStepType,FingerType;function getServerConfig(){var e=getStartupParams().remoteCh;return e&&serverConfig[e]?serverConfig[e]:serverConfig.default}!function(e){e.ById="Tyro.byId",e.Sticky="Tyro.sticky",e.StickyNotSendPaused="Tyro.stickyNotSendPaused",e.StickyAsync="Tyro.stickyAsync",e.ScriptSource="Tyro.scriptSource",e.Resumed="Debugger.resumed",e.ConsoleAPICalled="Runtime.consoleAPICalled"}(ResponseEvent||(ResponseEvent={})),function(e){e.DiscardConsoleEntries="Tyro.discardConsoleEntries",e.Evaluate="Tyro.evaluate",e.EvaluateOnCallFrame="Tyro.evaluateOnCallFrame",e.CallFunctionOn="Tyro.callFunctionOn",e.CompileScript="Tyro.compileScript",e.SetBreakpointsActive="Tyro.setBreakpointsActive",e.SetSkipAllPauses="Tyro.setSkipAllPauses",e.Resume="Tyro.resume",e.StepInto="Tyro.stepInto",e.StepOver="Tyro.stepOver",e.StepOut="Tyro.stepOut",e.Pause="Tyro.pause",e.GetPossibleBreakpoints="Tyro.getPossibleBreakpoints",e.SetBreakpointByUrl="Tyro.setBreakpointByUrl",e.SetBreakpoint="Tyro.setBreakpoint",e.RemoveBreakpoint="Tyro.removeBreakpoint",e.REPL="Tyro.repl",e.GetVariableValue="Tyro.getVariableValue",e.SetPauseOnExceptions="Tyro.setPauseOnExceptions",e.SetAsyncCallStackDepth="Tyro.setAsyncCallStackDepth",e.GetProperties="Tyro.getProperties"}(RequestMethod||(RequestMethod={})),function(e){e[e.Non=0]="Non",e[e.NextSticky=1]="NextSticky",e[e.StepOver=2]="StepOver",e[e.StepOut=3]="StepOut"}(BreakStepType||(BreakStepType={})),function(e){e[e.Entry=0]="Entry",e[e.Exit=1]="Exit"}(FingerType||(FingerType={}));var TyroUtil=function(){function e(){}return e.throwsMessage=function(e){return"[Throws: "+(e?e.message:"?")+"]"},e.safeGetValueFromPropertyOnObject=function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))try{return t[n]}catch(t){return e.throwsMessage(t)}return t[n]},e.ensureProperties=function(t){var n=[];return function t(s){if(null===s||"object"!=typeof s)return s;if(-1!==n.indexOf(s))return"[Circular]";if(n.push(s),"function"==typeof s.toJSON)try{var i=t(s.toJSON());return n.pop(),i}catch(t){return e.throwsMessage(t)}if(Array.isArray(s)){var r=s.map(t);return n.pop(),r}var o=Object.keys(s).reduce((function(n,i){return n[i]=t(e.safeGetValueFromPropertyOnObject(s,i)),n}),{});return n.pop(),o}(t)},e.safeJSONStringify=function(t,n,s){return JSON.stringify(e.ensureProperties(t),n,s)},e.isWebIDE=function(){return!("undefined"==typeof navigator||!navigator)&&(navigator.swuserAgent||navigator.userAgent||"").indexOf("AlipayIDE")>-1},e}(),StickyFinger=function(){function StickyFinger(e,t,n,s){var i=this;this.isWebIDE=!1,this.asyncRequestMethod="tyroRequest",this.host=t,this.contextMap={},this.contextUrlMap={},this.breakpointMap={},this.breakpointIdMap={},this.debuggerMap={},this.objectMap={},this.originConsoleAPI={},this.requestTaskId=0,this.stickyMsgQueue=[],this.wsMsgQueue=[],this.wsIsOpen=!1,this.instrumentId=n,this.stickyFlag=s.stickyFlag,this.fingerFlag=s.fingerFlag,this.hookConsole(),this.stickyFlag&&(setTimeout((function(){i.socketTask=my.connectSocket({url:"wss://"+getServerConfig().domain+"/tyro/agent/"+i.instrumentId,multiple:!0});var e=function(){if(!i.wsIsOpen){i.originConsoleAPI.log("[tyro-agent] WebSocket 连接成功"),i.wsIsOpen=!0;for(var e=0,t=i.wsMsgQueue;e<t.length;e++){var n=t[e];i.socketTask.send({data:n})}i.wsMsgQueue=[]}};i.socketTask.onOpen((function(){e()})),i.socketTask.onClose((function(){i.originConsoleAPI.log("[tyro-agent] WebSocket 连接已关闭")})),i.socketTask.onMessage((function(t){i.wsIsOpen||e(),i.handleStickyAsync(JSON.parse(t.data.data))}))}),2e3),this.breakpointsActive=!0,this.skipAllPauses=!1,this.breakStepType=BreakStepType.Non,this.stackDepth=0,this.pauseOnExceptions="none",this.asyncCallStackDepth=0,this.lastStickyAsyncError=0,this.generateObjectId=0,this.globalExecutionContext=e,this.evaluateOnCallFrameExpression="",this.stickyNotSendPaused=!1,this.sendStickyParams=!1),this.fingerFlag&&(this.fingerId=0,this.fingerCache=[],this.fingerSendInterval=1e3,this.jsapiCallId=0,setInterval((function(){0!==i.fingerCache.length&&(i.sendPerf("Perf.trace",i.fingerCache),i.fingerCache=[])}),this.fingerSendInterval)),this.isWebIDE=TyroUtil.isWebIDE(),this.isWebIDE&&(this.asyncRequestMethod="tyroRequestAsync")}return StickyFinger.rewritePath=function(e){var t=e;return"."===t[0]&&(t=t.replace(".","")),t="app://"+(t=t.replace("tmp/data/build/",""))},StickyFinger.processRawContext=function(e){var t={path:this.rewritePath(e.path),contextId:String(e.contextId),scope:{0:[]},function:{},debuggerLine:e.debuggerLine,stickyLine:e.stickyLine};return e.scope&&Object.keys(e.scope).map((function(n){var s=e.scope[n],i=s.shift(),r=t.scope[i];t.scope[n]=r?r.concat(s.filter((function(e){return r.indexOf(e)<0}))):s})),e.function&&Object.keys(e.function).map((function(n){var s=e.function[n];t.function[n]={name:s[0],line:s[1]}})),t},StickyFinger.prototype.register=function(e,t){var n=String(e.contextId),s=StickyFinger.rewritePath(e.path);this.originConsoleAPI.log("[tyro-agent] register contextId "+n+" path "+s),this.contextMap[n]||this.breakpointMap[n]?this.originConsoleAPI.warn("[tyro-agent] duplicate context register "+n+" "+s):(this.contextMap[n]=StickyFinger.processRawContext(e),this.contextUrlMap[s]=n,this.breakpointMap[n]={},this.debuggerMap[n]=this.contextMap[n].debuggerLine.reduce((function(e,t){return e[t-1]=!0,e}),{}),this.stickyFlag&&this.xhrSend(ResponseEvent.ScriptSource,{scriptSource:t,scriptId:String(n),executionContextId:0,url:s}))},StickyFinger.prototype.sticky=function(e,t,n){if(!this.skipAllPauses&&this.breakpointsActive&&((this.debuggerMap[e]||{})[t]||(this.breakpointMap[e]||{})[t]||this.breakStepType===BreakStepType.NextSticky||this.breakStepType===BreakStepType.StepOver&&(new Error).stack.split("\n").length<=this.stackDepth||this.breakStepType===BreakStepType.StepOut&&(new Error).stack.split("\n").length<this.stackDepth||!0===this.sendStickyParams)){this.originConsoleAPI.log("[tyro-agent] sticky "+e+" "+t),this.breakStepType=BreakStepType.Non;var s={};if(this.stickyNotSendPaused)this.originConsoleAPI.log("[tyro-agent] stickyNotSendPaused");else{if(!this.sendStickyParams){this.originConsoleAPI.log("[tyro-agent] sticky sendStickyParams step 1"),s={callFrames:null,reason:"other",hitBreakpoints:[]};var i=this.breakpointMap[e][t];i&&s.hitBreakpoints.push(i);var r=(new Error).stack.split("\n");return this.stackDepth=r.length,Agent.isPhone?s.callFrames=this.processCallFramesPhone(String(e),t,n,r):s.callFrames=this.processCallFrames(String(e),t,n,r),this.stickyParams=s,this.sendStickyParams=!0,"(function(){\n          var localObject = {};\n          Agent.getScopeVariables().forEach(function (key) {\n            localObject[key] = (function(){try{return eval(key)}catch(e){return undefined}})();\n          });\n          Agent.inflateStickyParamsObject(localObject);\n          return true;\n        })()"}this.originConsoleAPI.log("[tyro-agent] sticky sendStickyParams step 2"),s=this.stickyParams,this.sendStickyParams=!1}this.originConsoleAPI.log("[tyro-agent] sticky params "+TyroUtil.safeJSONStringify(s));var o=JSON.parse(this.xhrSend(ResponseEvent.Sticky,s));return this.handleSticky(o)}},StickyFinger.prototype.fingerEntry=function(e,t){var n=this.contextMap[e].path,s=this.contextMap[e].function[t],i=this.generateFingerId(),r={time:Date.now(),file:n,line:s.line,name:s.name,id:i,type:FingerType.Entry};return this.fingerCache.push(r),i},StickyFinger.prototype.fingerExit=function(e,t,n){var s=this.contextMap[e].path,i=this.contextMap[e].function[t],r={time:Date.now(),file:s,line:i.line,name:i.name,id:n,type:FingerType.Exit};this.fingerCache.push(r)},StickyFinger.prototype.sendPerf=function(e,t){self.bugmeAPI?self.bugmeAPI.send({method:e,params:t}):self.document?self.document.addEventListener("bugmeInjected",(function(){self.bugmeAPI.send({method:e,params:t})})):self.addEventListener&&self.addEventListener("bugmeInjected",(function(){self.bugmeAPI.send({method:e,params:t})}))},StickyFinger.prototype.hookConsole=function(){var e=this;this.originConsoleAPI.log=console.log.bind(console),this.originConsoleAPI.debug=console.debug.bind(console),this.originConsoleAPI.info=console.info.bind(console),this.originConsoleAPI.error=console.error.bind(console),this.originConsoleAPI.warn=console.warn.bind(console),console.log=function(){for(var t,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if((t=e.originConsoleAPI).log.apply(t,n),!(n.length>0&&"string"==typeof n[0]&&(n[0].indexOf("[framework]")>=0||n[0].indexOf("dispatchEvent")>=0||n[0].indexOf("onMessage push")>=0))){var i={type:"log",args:n.map((function(t){return e.objectToRemoteObject(t,null,"object"==typeof t)})),executionContextId:0,timestamp:(new Date).getTime()};e.xhrSend(ResponseEvent.ConsoleAPICalled,i,null,!1)}},console.debug=function(){for(var t,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if((t=e.originConsoleAPI).debug.apply(t,n),!(n.length>0&&"string"==typeof n[0]&&(n[0].indexOf("[framework]")>=0||n[0].indexOf("dispatchEvent")>=0||n[0].indexOf("onMessage push")>=0))){var i={type:"debug",args:n.map((function(t){return e.objectToRemoteObject(t,null,"object"==typeof t)})),executionContextId:0,timestamp:(new Date).getTime()};e.xhrSend(ResponseEvent.ConsoleAPICalled,i,null,!1)}},console.info=function(){for(var t,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if((t=e.originConsoleAPI).info.apply(t,n),!(n.length>0&&"string"==typeof n[0]&&(n[0].indexOf("[framework]")>=0||n[0].indexOf("dispatchEvent")>=0||n[0].indexOf("onMessage push")>=0))){var i={type:"info",args:n.map((function(t){return e.objectToRemoteObject(t,null,"object"==typeof t)})),executionContextId:0,timestamp:(new Date).getTime()};e.xhrSend(ResponseEvent.ConsoleAPICalled,i,null,!1)}},console.error=function(){for(var t,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if((t=e.originConsoleAPI).error.apply(t,n),!(n.length>0&&"string"==typeof n[0]&&(n[0].indexOf("[framework]")>=0||n[0].indexOf("dispatchEvent")>=0||n[0].indexOf("onMessage push")>=0))){var i={type:"error",args:n.map((function(t){return e.objectToRemoteObject(t,null,"object"==typeof t)})),executionContextId:0,timestamp:(new Date).getTime()};e.xhrSend(ResponseEvent.ConsoleAPICalled,i,null,!1)}},console.warn=function(){for(var t,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if((t=e.originConsoleAPI).warn.apply(t,n),!(n.length>0&&"string"==typeof n[0]&&(n[0].indexOf("[framework]")>=0||n[0].indexOf("dispatchEvent")>=0||n[0].indexOf("onMessage push")>=0))){var i={type:"warning",args:n.map((function(t){return e.objectToRemoteObject(t,null,"object"==typeof t)})),executionContextId:0,timestamp:(new Date).getTime()};e.xhrSend(ResponseEvent.ConsoleAPICalled,i,null,!1)}}},StickyFinger.prototype.inflateStickyParamsObject=function(e){if(0!==this.stickyParams.callFrames.length){this.generateObjectId+=1;var t=String(this.generateObjectId);this.objectMap[t]=e,this.stickyParams.callFrames[0].scopeChain.push({type:"local",name:this.stickyParams.callFrames[0].functionName,object:{className:"Object",description:"Object",objectId:t,type:"object"}})}},StickyFinger.prototype.processCallFrames=function(e,t,n,s){var i=this,r=[],o=s.slice(3,s.length).map((function(e){return e.substr(0,e.lastIndexOf(":")).replace("    at ","").replace(" (",":")})),a=0,c=!0;return o.map((function(t){var s=t.split(":"),o=s[0],p=i.contextMap[e].path,u=Number(s[s.length-1]),l=i.contextUrlMap[p]||"none",y=a+":"+u+":"+p;c&&(i.scopeVariables=void 0!==i.contextMap[e]?i.contextMap[e].scope[n]:[],c=!1);var h={callFrameId:y,functionName:o,location:{scriptId:l,lineNumber:u,columnNumber:0},url:p,scopeChain:[],this:{}};r.push(h),a+=1})),r},StickyFinger.prototype.processCallFramesPhone=function(e,t,n,s){var i=this,r=[],o=s.slice(2,s.length).map((function(e){return e.substr(0,e.lastIndexOf(":")).replace("    at ","").replace(" (",":").replace("@",":")})),a=0,c=!0;return o.map((function(s){var o=s.split(":"),p=o[0],u=i.contextMap[e].path,l=Number(o[o.length-1]),y=i.contextUrlMap[u]||"none",h=a+":"+l+":"+u;c&&(i.scopeVariables=void 0!==i.contextMap[e]?i.contextMap[e].scope[n]:[],i.originConsoleAPI.log("scopeVariables "+TyroUtil.safeJSONStringify(i.scopeVariables)),i.originConsoleAPI.log("scopeVariables "+TyroUtil.safeJSONStringify(i.contextMap[e])+" "+i.contextMap[e].scope+" "+n),c=!1);var d={callFrameId:h,functionName:p,location:{scriptId:y,lineNumber:t,columnNumber:0},url:u,scopeChain:[],this:{}};r.push(d),a+=1})),r},StickyFinger.prototype.stickyAsyncLoop=function(){this.xhrSend(ResponseEvent.StickyAsync,{})},StickyFinger.prototype.xhrSendJSAPI=function(e,t,n,s){var i,r=this;if(e===ResponseEvent.Sticky){var o;this.stickyMsgQueue.length>0?(this.stickyMsgQueue.push({method:this.stickyNotSendPaused?ResponseEvent.StickyNotSendPaused:ResponseEvent.Sticky,params:t}),o=TyroUtil.safeJSONStringify(this.stickyMsgQueue),this.stickyMsgQueue=[]):o=TyroUtil.safeJSONStringify({method:this.stickyNotSendPaused?ResponseEvent.StickyNotSendPaused:ResponseEvent.Sticky,params:t}),my.call("showRemoteDebugMask",{text:" ",buttonTitle:"断点命中",hide:!1}),this.stickyNotSendPaused=!1;var a=Date.now(),c=my.callSync("tyroRequest",{url:this.host+"/tyro/agent",method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","instrument-id":this.instrumentId},data:o,timeout:6e5,blockTimeout:6e5,dataType:"json",requestTaskId:this.requestTaskId++});return my.call("showRemoteDebugMask",{hide:!0}),c.error||null===c?(null===c?this.originConsoleAPI.error("[tyro-agent] xhrSend error result is "+c):this.originConsoleAPI.error("[tyro-agent] xhrSend error "+c.error+" "+c.errorMessage),Date.now()-a>=5e3?this.xhrSendJSAPI(e,t,n,s):TyroUtil.safeJSONStringify({method:"default"})):200!==c.status?(this.originConsoleAPI.error("[tyro-agent] xhrSend status fail "+e+" "+c.status),TyroUtil.safeJSONStringify({method:"default"})):c.data}if(e===ResponseEvent.StickyAsync){var p=TyroUtil.safeJSONStringify({method:ResponseEvent.StickyAsync,params:t});this.originConsoleAPI.info("[tyro-agent] xhrSend async send "+p),my.call(this.asyncRequestMethod,{url:this.host+"/tyro/agent",method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","instrument-id":this.instrumentId},data:p,timeout:6e5,dataType:"json",requestTaskId:this.requestTaskId++,success:function(e){r.lastStickyAsyncError=0,r.stickyAsyncLoop(),200===e.status?(r.originConsoleAPI.info("[tyro-agent] xhrSend async success "+e.status+" "+e.data),r.handleStickyAsync(JSON.parse(e.data))):r.originConsoleAPI.error("[tyro-agent] xhrSend async fail "+e.status+" "+e.data)},fail:function(e){r.lastStickyAsyncError>=3?setTimeout((function(){r.stickyAsyncLoop()}),3e3):(r.lastStickyAsyncError+=1,r.stickyAsyncLoop()),r.originConsoleAPI.error("[tyro-agent] xhrSend async error "+TyroUtil.safeJSONStringify(e))}})}switch(e){case ResponseEvent.ById:i={id:n,result:t};break;case ResponseEvent.ScriptSource:i={method:ResponseEvent.ScriptSource,params:t};break;case ResponseEvent.Resumed:i={method:ResponseEvent.Resumed,params:t};break;case ResponseEvent.ConsoleAPICalled:i={method:ResponseEvent.ConsoleAPICalled,params:t};break;default:return}s?this.stickyMsgQueue.push(i):this.wsIsOpen?this.socketTask.send({data:TyroUtil.safeJSONStringify(i)}):this.wsMsgQueue.push(TyroUtil.safeJSONStringify(i))},StickyFinger.prototype.xhrSend=function(e,t,n,s){var i=this;if(Agent.isPhone)return this.xhrSendJSAPI(e,t,n,s);var r,o=new XMLHttpRequest;if(e===ResponseEvent.Sticky){var a;if(o.open("POST",this.host+"/tyro/agent",!1),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.setRequestHeader("instrument-id",this.instrumentId),this.stickyMsgQueue.length>0){this.stickyMsgQueue.push({method:this.stickyNotSendPaused?ResponseEvent.StickyNotSendPaused:ResponseEvent.Sticky,params:t});try{a=TyroUtil.safeJSONStringify(this.stickyMsgQueue)}catch(e){this.originConsoleAPI.error(e),a=TyroUtil.safeJSONStringify({method:this.stickyNotSendPaused?ResponseEvent.StickyNotSendPaused:ResponseEvent.Sticky,params:t})}finally{this.stickyMsgQueue=[]}}else a=TyroUtil.safeJSONStringify({method:this.stickyNotSendPaused?ResponseEvent.StickyNotSendPaused:ResponseEvent.Sticky,params:t});if(this.stickyNotSendPaused=!1,o.send(a),200===o.status)return o.responseText;throw new Error("[sticky-finger] xhrSend error "+e+" "+o.status)}if(e===ResponseEvent.StickyAsync)return o.open("POST",this.host+"/tyro/agent",!0),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.setRequestHeader("instrument-id",this.instrumentId),o.onload=function(){if(i.lastStickyAsyncError=0,i.stickyAsyncLoop(),4!==o.readyState||200!==o.status)throw new Error("[tyro-agent] xhrSend async fail "+e+" "+o.readyState+" "+o.status);i.handleStickyAsync(JSON.parse(o.responseText))},o.onerror=function(){throw i.lastStickyAsyncError>=3?setTimeout((function(){i.stickyAsyncLoop()}),3e3):(i.lastStickyAsyncError+=1,i.stickyAsyncLoop()),new Error("[tyro-agent] xhrSend async error "+e+" "+o.readyState+" "+o.status)},void o.send(TyroUtil.safeJSONStringify({method:ResponseEvent.StickyAsync,params:t}));switch(o.open("POST",this.host+"/tyro/agent",!0),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.setRequestHeader("instrument-id",this.instrumentId),o.onload=function(){if(4!==o.readyState||200!==o.status)throw new Error("[tyro-agent] xhrSend async fail "+e+" "+o.readyState+" "+o.status)},o.onerror=function(){throw new Error("[tyro-agent] xhrSend async error "+e+" "+o.readyState+" "+o.status)},e){case ResponseEvent.ById:r={id:n,result:t};break;case ResponseEvent.ScriptSource:r={method:ResponseEvent.ScriptSource,params:t};break;case ResponseEvent.Resumed:r={method:ResponseEvent.Resumed,params:t};break;case ResponseEvent.ConsoleAPICalled:r={method:ResponseEvent.ConsoleAPICalled,params:t};break;default:return}s?this.stickyMsgQueue.push(r):o.send(TyroUtil.safeJSONStringify(r))},StickyFinger.prototype.handleSticky=function(e){var t=e.id,n=e.method,s=e.params;switch(n){case RequestMethod.DiscardConsoleEntries:return this.stickyNotSendPaused=!0,this.originConsoleAPI.log("[tyro-agent] DiscardConsoleEntries success"),"true";case RequestMethod.CallFunctionOn:return this.stickyNotSendPaused=!0,this.originConsoleAPI.log("[tyro-agent] CallFunctionOn TODO sticky"),"true";case RequestMethod.CompileScript:return this.stickyNotSendPaused=!0,this.originConsoleAPI.log("[tyro-agent] CompileScript success, "+TyroUtil.safeJSONStringify(s)),"true";case RequestMethod.SetBreakpointsActive:return this.stickyNotSendPaused=!0,this.breakpointsActive=s.active,this.originConsoleAPI.log("[tyro-agent] SetBreakpointsActive success, breakpointsActive "+this.breakpointsActive),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.SetSkipAllPauses:return this.stickyNotSendPaused=!0,this.skipAllPauses=s.skip,this.originConsoleAPI.log("[tyro-agent] SetSkipAllPauses success, skipAllPauses "+this.skipAllPauses),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.Resume:return this.xhrSend(ResponseEvent.Resumed,{}),this.originConsoleAPI.log("[tyro-agent] Resume success"),"false";case RequestMethod.StepInto:return this.xhrSend(ResponseEvent.Resumed,{}),this.breakStepType=BreakStepType.NextSticky,this.originConsoleAPI.log("[tyro-agent] StepInto success"),"false";case RequestMethod.StepOver:return this.xhrSend(ResponseEvent.Resumed,{}),this.breakStepType=BreakStepType.StepOver,this.originConsoleAPI.log("[tyro-agent] StepOver success"),"false";case RequestMethod.StepOut:return this.xhrSend(ResponseEvent.Resumed,{}),this.breakStepType=BreakStepType.StepOut,this.originConsoleAPI.log("[tyro-agent] StepOut success"),"false";case RequestMethod.GetPossibleBreakpoints:return this.stickyNotSendPaused=!0,this.getPossibleBreakpoints(t,s,!0),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.SetBreakpointByUrl:return this.stickyNotSendPaused=!0,this.setBreakpointByUrl(t,s,!0),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.SetBreakpoint:return this.stickyNotSendPaused=!0,this.setBreakpoint(t,s,!0),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.RemoveBreakpoint:return this.stickyNotSendPaused=!0,this.removeBreakpoint(t,s),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.REPL:return this.stickyNotSendPaused=!0,this.breakStepType=BreakStepType.NextSticky,"(function(){(function(){"+s.statement+"})();return true})()";case RequestMethod.GetVariableValue:this.stickyNotSendPaused=!0;var i=e.params;return this.breakStepType=BreakStepType.NextSticky,"(function(){(function(){\n          Agent.variableValue({"+i.map((function(e){return e+": (function(){try{return "+e+"}catch(e){return undefined}})()"})).join(",")+"})\n        })();return true})()";case RequestMethod.SetPauseOnExceptions:return this.stickyNotSendPaused=!0,this.setPauseOnExceptions(t,s),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.SetAsyncCallStackDepth:return this.stickyNotSendPaused=!0,this.setAsyncCallStackDepth(t,s),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.EvaluateOnCallFrame:return this.stickyNotSendPaused=!0,this.evaluateOnCallFrameExpression=s.expression,this.breakStepType=BreakStepType.NextSticky,"(function(){\n          var tyroRet,tyroErr;\n          try{tyroRet=eval(Agent.getEvaluateOnCallFrameExpression())}\n          catch(e){tyroErr=e}\n          Agent.evaluateOnCallFrame("+t+",tyroRet,tyroErr,"+s.generatePreview+");\n          return true;\n        })()";case RequestMethod.GetProperties:return this.stickyNotSendPaused=!0,this.getProperties(t,s,!0),this.breakStepType=BreakStepType.NextSticky,"true";default:return this.breakStepType=BreakStepType.NextSticky,"true"}},StickyFinger.prototype.handleStickyAsync=function(e){var t=e.id,n=e.method,s=e.params;switch(this.originConsoleAPI.log("[tyro-agent] handleStickyAsync "+t+", "+n+", "+s),n){case RequestMethod.DiscardConsoleEntries:this.originConsoleAPI.log("[tyro-agent] DiscardConsoleEntries success");break;case RequestMethod.Evaluate:this.originConsoleAPI.log("[tyro-agent] Evaluate start, expression "+s.expression);var i=this.evaluate(this.globalExecutionContext,t,s);this.originConsoleAPI.log("[tyro-agent] Evaluate success, expression "+s.expression+", result "+TyroUtil.safeJSONStringify(i));break;case RequestMethod.CallFunctionOn:this.originConsoleAPI.log("[tyro-agent] CallFunctionOn TODO stickyAsync");break;case RequestMethod.CompileScript:this.originConsoleAPI.log("[tyro-agent] CompileScript success, params "+TyroUtil.safeJSONStringify(s));break;case RequestMethod.SetBreakpointsActive:this.breakpointsActive=s.active,this.originConsoleAPI.log("[tyro-agent] SetBreakpointsActive success, breakpointsActive "+this.breakpointsActive);break;case RequestMethod.SetSkipAllPauses:this.skipAllPauses=s.skip,this.originConsoleAPI.log("[tyro-agent] SetSkipAllPauses success, skipAllPauses "+this.skipAllPauses);break;case RequestMethod.Pause:this.breakStepType=BreakStepType.NextSticky,this.originConsoleAPI.log("[tyro-agent] Pause success");break;case RequestMethod.GetPossibleBreakpoints:this.getPossibleBreakpoints(t,s);break;case RequestMethod.SetBreakpointByUrl:this.setBreakpointByUrl(t,s);break;case RequestMethod.SetBreakpoint:this.setBreakpoint(t,s);break;case RequestMethod.RemoveBreakpoint:this.removeBreakpoint(t,s);break;case RequestMethod.SetPauseOnExceptions:this.setPauseOnExceptions(t,s);break;case RequestMethod.SetAsyncCallStackDepth:this.setAsyncCallStackDepth(t,s);break;case RequestMethod.GetProperties:this.getProperties(t,s)}},StickyFinger.prototype.objectToRemoteObject=function(e,t,n){var s={};if(isError(e)&&(t=e),t)return error2RemoteObject(t);switch(s.type=typeof e,s.type){case"undefined":break;case"object":if(null===e){s.subtype="null",s.value=null;break}if(void 0!==e.constructor&&(s.className=e.constructor.name),void 0!==e.toString)try{s.description=e.toString()}catch(e){s.description="[object Object]"}else s.description="[object Object]";if(this.generateObjectId+=1,s.objectId=String(this.generateObjectId),this.objectMap[String(this.generateObjectId)]=e,n)for(var i in s.preview={type:"object",description:"Object",overflow:!1,properties:[]},e){var r=typeof e[i];s.preview.properties.push({name:i,type:r,value:"object"===r?"Object":"function"===r?"":e[i]})}break;case"function":s.description=e.toString(),s.className="Function";break;default:s.value=e,s.description=e.toString()}return s},StickyFinger.prototype.evaluateOnCallFrame=function(e,t,n,s){var i=this.objectToRemoteObject(t,n,s);return this.xhrSend(ResponseEvent.ById,{result:i},e,!0),i},StickyFinger.prototype.evaluate=function(executionContext,id,params){var returnValue,error;try{returnValue=function(expression){return"function"==typeof eval?eval(expression):Agent.evalReference(expression)}.call(executionContext,params.expression)}catch(e){error=e}var result=this.objectToRemoteObject(returnValue,error,params.generatePreview);return this.xhrSend(ResponseEvent.ById,{result:result},id),result},StickyFinger.prototype.getPossibleBreakpoints=function(e,t,n){var s=t.scriptId,i=t.startLine,r=t.endLine===t.startLine?t.endLine+1:t.endLine,o={locations:[]};if(this.contextMap[s])for(var a=this.contextMap[s].stickyLine,c=i;c<r;c++)a.includes(c)&&o.locations.push({scriptId:s,lineNumber:c,columnNumber:0});else this.originConsoleAPI.warn("[tyro-agent] getPossibleBreakpoints no scriptId "+s+" in contextMap");this.originConsoleAPI.log("[tyro-agent] getPossibleBreakpoints success, result: "+TyroUtil.safeJSONStringify(o)),this.xhrSend(ResponseEvent.ById,o,e,n)},StickyFinger.prototype.setBreakpointByUrl=function(e,t,n){var s=t.scriptId,i=t.url,r=t.lineNumber;if(this.contextMap[s])if(this.contextMap[s].stickyLine.includes(r)){var o=s+":"+r+":0:"+i,a={breakpointId:o,locations:[{scriptId:s,lineNumber:r,columnNumber:0}]};this.breakpointMap[s][r]=o,this.breakpointIdMap[o]={contextId:s,line:r},this.originConsoleAPI.log("[tyro-agent] setBreakpointByUrl success, scriptId: "+s+", url: "+i+", lineNumber: "+r),this.xhrSend(ResponseEvent.ById,a,e,n)}else this.originConsoleAPI.warn("[tyro-agent] setBreakpointByUrl not sticky line, scriptId: "+s+", url: "+i+", lineNumber: "+r);else this.originConsoleAPI.warn("[tyro-agent] setBreakpointByUrl no contextMap, scriptId: "+s)},StickyFinger.prototype.setBreakpoint=function(e,t,n){var s=t.scriptId,i=t.lineNumber;if(this.contextMap[s])if(this.contextMap[s].stickyLine.includes(i)){var r=s+":"+i+":0",o={breakpointId:r,actualLocation:{scriptId:s,lineNumber:i,columnNumber:0}};this.breakpointMap[s][i]=r,this.breakpointIdMap[r]={contextId:s,line:i},this.originConsoleAPI.log("[tyro-agent] setBreakpoint success, scriptId: "+s+", lineNumber: "+i),this.xhrSend(ResponseEvent.ById,o,e,n)}else this.originConsoleAPI.warn("[tyro-agent] setBreakpoint not sticky line, scriptId: "+s+", lineNumber: "+i);else this.originConsoleAPI.warn("[tyro-agent] setBreakpoint no contextMap, scriptId: "+s)},StickyFinger.prototype.removeBreakpoint=function(e,t){var n=t.breakpointId,s=this.breakpointIdMap[n];s||this.originConsoleAPI.warn("[tyro-agent] removeBreakpoint no breakpointId "+n);var i=s.contextId,r=s.line;delete this.breakpointMap[i][r],this.originConsoleAPI.log("[tyro-agent] removeBreakpoint success, breakpointId: "+n+", scriptId: "+i+", line: "+r)},StickyFinger.prototype.setPauseOnExceptions=function(e,t){t&&["none","uncaught","all"].includes(t.state)?(this.pauseOnExceptions=t.state,this.originConsoleAPI.log("[tyro-agent] setPauseOnExceptions success, pauseOnExceptions state "+this.pauseOnExceptions)):this.originConsoleAPI.warn("[tyro-agent] setPauseOnExceptions state invalid: "+TyroUtil.safeJSONStringify(t))},StickyFinger.prototype.setAsyncCallStackDepth=function(e,t){!t||"number"!=typeof t.maxDepth||t.maxDepth<0?this.originConsoleAPI.warn("[tyro-agent] setAsyncCallStackDepth maxDepth invalid: "+TyroUtil.safeJSONStringify(t)):(this.asyncCallStackDepth=t.maxDepth,this.originConsoleAPI.log("[tyro-agent] setAsyncCallStackDepth success, maxDepth "+this.asyncCallStackDepth))},StickyFinger.prototype.getProperties=function(e,t,n){var s=t.objectId,i=this.objectMap[s],r=[];for(var o in i)r.push({name:o,value:this.objectToRemoteObject(i[o])});this.xhrSend(ResponseEvent.ById,{result:r},e,n)},StickyFinger.prototype.generateFingerId=function(){return this.fingerId+=1,this.fingerId},StickyFinger}(),Agent=function(){function e(t,n){if(e.singleton)return e.singleton;this.host="https://"+getServerConfig().domain,this.stickyFinger=new StickyFinger("undefined"!=typeof window?window:self,this.host,t,n)}return e.getShadowMethod=function(){this.globalReference=self,"function"==typeof eval?this.evalReference=eval:"function"==typeof __eval&&(this.evalReference=__eval)},e.setShadowMethod=function(){this.globalReference.eval=this.evalReference},e.setInstrumentId=function(e){this.instrumentId=e},e.register=function(t,n){if(!e.singleton){if(!this.instrumentId&&"undefined"!=typeof my)try{this.instrumentId=getStartupParams().tyroId}catch(e){}e.instance(this.instrumentId,t)}e.singleton.stickyFinger.register(t,n)},e.sticky=function(t,n,s){return e.singleton.stickyFinger.sticky(t,n,s)},e.getEvaluateOnCallFrameExpression=function(){return e.singleton.stickyFinger.evaluateOnCallFrameExpression},e.evaluateOnCallFrame=function(t,n,s,i){return e.singleton.stickyFinger.evaluateOnCallFrame(t,n,s,i)},e.getScopeVariables=function(){return e.singleton.stickyFinger.scopeVariables},e.inflateStickyParamsObject=function(t){return e.singleton.stickyFinger.inflateStickyParamsObject(t)},e.entry=function(t,n){return e.singleton.stickyFinger.fingerEntry(t,n)},e.exit=function(t,n,s){e.singleton.stickyFinger.fingerExit(t,n,s)},e.instance=function(t,n){e.singleton=new e(t,n)},e.isPhone=!0,e.instrumentId=null,e}();Agent.getShadowMethod();var globalReference="undefined"!=typeof window?window:self;globalReference.Agent||(globalReference.StickyFinger=StickyFinger,globalReference.Agent=Agent)}();

!function(){"use strict";var e,t,n,o,r,a,i,c,s,p;!function(e){e.PageResume="pageResume",e.PagePause="pagePause",e.DebugPanelClick="tinyRemoteDebugPanelButtonClick",e.DebugConsole="onTinyDebugConsole",e.DebugNetworkRequest="tinyAppRemoteDebug_network_request",e.DebugNetworkResponse="tinyAppRemoteDebug_network_response",e.DebugNetworkError="tinyAppRemoteDebug_network_error",e.DebugStorageChanged="tinyAppRemoteDebug_storage",e.MessageFromVConsole="onMessageFromVConsole"}(e||(e={})),function(e){e.GetPagesData="Tiny.Data.getPageData",e.SetPageData="Tiny.Data.setPageData"}(t||(t={})),function(e){e.DataChanged="Tiny.Data.dataChanged"}(n||(n={})),function(e){e.GetStorageInfo="Tiny.Storage.getStorageInfo",e.ClearStorage="Tiny.Storage.clearStorage",e.RemoveStorage="Tiny.Storage.removeStorage",e.SetStorage="Tiny.Storage.setStorage"}(o||(o={})),function(e){e.StorageChanged="Tiny.Storage.storageChanged"}(r||(r={})),function(e){e.Enable="MiniAppLog.enable"}(a||(a={})),function(e){e.ApiSyncCall="MiniAppLog.onApiSyncCall",e.ApiSyncCallback="MiniAppLog.onApiSyncCallback",e.ApiCall="MiniAppLog.onApiCall",e.ApiCallback="MiniAppLog.onApiCallback",e.SetData="MiniAppLog.onSetData",e.SetDataCallback="MiniAppLog.onSetDataCallback",e.ShareAppMessage="MiniAppLog.onShareAppMessage"}(i||(i={})),function(e){e.consoleAPICalled="Runtime.consoleAPICalled",e.executionContextDestroyed="Runtime.executionContextDestroyed",e.executionContextsCleared="Runtime.executionContextsCleared",e.executionContextCreated="Runtime.executionContextCreated"}(c||(c={})),function(e){e.RequestWillBeSent="Network.requestWillBeSent",e.ResponseReceived="Network.responseReceived",e.LoadingFinished="Network.loadingFinished",e.LoadingFailed="Networkw.loadingFailed",e.GetResponseBody="Network.getResponseBody"}(s||(s={})),function(e){e.Data="data",e.Storage="storage",e.AppLog="applog"}(p||(p={}));var u=Date.now()%1e9;function l(e){this.name="__st"+(1e9*Math.random()>>>0)+u+++"__",e&&e.forEach&&e.forEach(this.add,this)}var g=l.prototype;g.add=function(e){var t=this.name;return e[t]||Object.defineProperty(e,t,{value:!0,writable:!0}),this},g.delete=function(e){return!!e[this.name]&&(e[this.name]=void 0,!0)},g.has=function(e){return!!e[this.name]};var f=l,d=self;var h="[DEBUG]";function _(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,[h].concat(e))}var y=function(){},m=d.importScripts,O=!1,A=[];function S(){return d.__appxStartupParams&&d.__appxStartupParams.appId?d.__appxStartupParams:d.AFAppX&&d.AFAppX.bridge&&d.AFAppX.bridge.callSync&&d.AFAppX.bridge.callSync("getStartupParams")||{}}function b(){var e=(d.__appxStartupParams||{}).appxRouteFramework;return"YES"===e||!0===e}var k=function(){var e="undefined"==typeof WeakSet?new f:new WeakSet;return function(t,n){if("object"==typeof n&&null!==n)try{if(e.has(n))return;e.add(n)}catch(e){console.error(e)}return n}};function v(e){return JSON.stringify(e,k())}var L,P=1;function C(){var e="undefined"!=typeof WeakSet;L=e?WeakSet:function(){function e(){this.elementKey="__weak_set_key__yek_tes_kaew__"+P++}return e.prototype.has=function(e){return 1===e[this.elementKey]},e.prototype.add=function(e){return e[this.elementKey]=1,this},e.prototype.delete=function(e){e[this.elementKey]=null},e}()}var D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function E(e,t){function n(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var x=function(){return(x=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},w=function(){function e(e,t){var n=this;this.interceptors=e,this.callback=t,this.nextRequestId=1e5,this.notifyDataChange=function(e,t,n,o,r){var a,i,c=null,s=0;r||(r={});var p=function(){s=!1===r.leading?0:Date.now(),c=null,i=e.apply(null,a),a=null};return function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var g=Date.now();s||!1!==r.leading||(s=g);var f=t-(g-s);return a=u,f<=0||f>t?(o(c),c=null,s=g,i=e.apply(null,a),a=null):c||!1===r.trailing||(c=n(p,f)),i}}((function(){n.callback({ext:{origin:"data"},method:"Tiny.Data.dataChanged"})}),300,setTimeout,clearTimeout)}return e.prototype.getNextRequestId=function(){return++this.nextRequestId},e}(),I=function(){var e=(L||C(),new L);return function(t,n){if("object"==typeof n&&null!==n){if(e.has(n))return;e.add(n)}return n}};function T(e){return JSON.stringify(e,I())}var R=0;var B="object"==typeof performance&&performance&&"function"==typeof performance.now?function(){return 1e3*performance.now()+R}:function(){return 1e3*Date.now()};function N(e){e.interceptors.appLifecycleManagerInterceptor.before("performLifeHook",(function(t,n){var o={aTime:B()/1e3,args:n,context:T(M(t))};!function(e,t){try{var n={ext:{origin:"applog"},method:"MiniAppLog."+t.args[0],params:t};e.callback(n)}catch(e){}}(e,o)})),e.interceptors.pageLifecycleManagerInterceptor.before("performLifeHook",(function(t,n){var o={aTime:B()/1e3,args:n,context:T(j(t))};!function(e,t){try{var n=function(e){var t;switch(e){case 0:t="onPageLoad";break;case 2:t="onPageReady";break;case 1:t="onPageShow";break;case 3:t="onPageHide";break;case 4:t="onPageUnload"}return t}(t.args[0]);if(!n)return;var o={ext:{origin:"applog"},method:"MiniAppLog."+n,params:t};e.callback(o),"onPageShow"===n&&e.notifyDataChange()}catch(e){}}(e,o)}))}function M(e){var t=e.app;return{app:{appInstanceId:t.appInstanceId,initTime:t.initTime,launchOptions:t.getLaunchOptions(),launchTime:t.launchTime},state:e.state}}function j(e){var t=e.page;return{page:{initTime:t.initTime,loadTime:t.loadTime,pageId:t.pageId,pagePath:t.pagePath,plugin:t.plugin},state:e.state}}function X(e){e.interceptors.bridgeSyncCallContextMethodInterceptor.all("invoke",(function(t,n){var o=e.getNextRequestId(),r=B()/1e3;return function(e,t){try{var n={ext:{origin:"applog"},method:"MiniAppLog.onApiSyncCall",params:G(t)};e.callback(n)}catch(e){}}(e,{context:t,args:n,reqId:o,aTime:r}),[[o,r],n]}),(function(t,n,o,r){var a=n[0],i=a[0],c=a[1],s=n[1],p=B()/1e3;!function(e,t){try{var n={ext:{origin:"applog"},method:"MiniAppLog.onApiSyncCallback",params:G(t)};e.callback(n)}catch(e){}}(e,{context:t,args:s,reqId:i,result:o,bTime:p,aTime:c})})),e.interceptors.bridgeAsyncCallContextMethodInterceptor.before("invoke",(function(t,n){var o=e.getNextRequestId(),r=B()/1e3;return t.__reqId=o,function(e,t){try{var n={ext:{origin:"applog"},method:"MiniAppLog.onApiCall",params:G(t)};e.callback(n)}catch(e){}}(e,{context:t,args:n,reqId:o,aTime:r}),"rpc"===t.apiName&&(t.option.getResponse||(t.$$rpcGetResponseToTrue=!0,t.option=x(x({},t.option),{getResponse:!0}))),n})),e.interceptors.bridgeAsyncCallContextMethodInterceptor.before("dispatchResultCallback",(function(t,n){var o=t.__reqId,r=B()/1e3;return function(e,t){try{var n={ext:{origin:"applog"},method:"MiniAppLog.onApiCallback",params:G(t)};e.callback(n)}catch(e){}}(e,{context:t,args:n,reqId:o,bTime:r}),"rpc"===t.apiName&&t.$$rpcGetResponseToTrue?[n[0].resData]:n}))}function G(e){if(e.context){var t=e.context,n=t.apiName,o=t.extraInfo,r=t.isMiniExtension,a=t.option,i=t.startTime,c=t.taskId,s=t.__reqId;return x(x({},e),{context:{__reqId:s,apiName:n,extraInfo:o,isMiniExtension:r,option:a,startTime:i,taskId:c}})}return e}var q=console.error;function H(e){e.interceptors.appBaseInstanceInterceptor.after("reportError",(function(e,t){t[0];!function(e){var t=new Error(e.formatted.message);t.stack=e.formatted.stack,setTimeout(q.bind(console,t),0)}({code:t[1],formatted:t[2]})}))}function F(e,t){try{e.notifyDataChange();var n={ext:{origin:"applog"},method:"MiniAppLog.onSetData",params:V(t)};e.callback(n)}catch(e){}}function K(e,t){try{var n={ext:{origin:"applog"},method:"MiniAppLog.onSetDataCallback",params:t};e.callback(n)}catch(e){}}function V(e){return e.context?e:{componentIs:e.component?e.component.is:void 0,isPage:e.isPage,option:e.options,pagePath:e.isPage?e.page.route:e.component.$page.route}}function W(e){var t=e.page;return{page:{appInstanceId:t.appInstanceId,initTime:t.initTime,loadTime:t.loadTime},pageId:e.pageId,pagePath:e.pagePath}}function U(e){var t=e.page;return{componentPath:e.componentPath,page:{appInstanceId:t.appInstanceId,initTime:t.initTime,loadTime:t.loadTime},pageId:t.pageId,pagePath:t.pagePath}}function $(e,t,n){R=1e3*Date.now()-B();var o=new w(t,n);!function(e){e.interceptors.pageFlexibleLogicInstanceMethodInterceptor.all("setData",(function(t,n){var o=e.getNextRequestId(),r=B()/1e3,a={aTime:r,args:n,context:T(W(t)),reqId:o};return F(e,a),[[o,r],n]}),(function(t,n,o,r){var a=n[0],i=a[0],c=a[1],s=n[1],p=B()/1e3;K(e,{aTime:c,args:s,bTime:p,context:T(W(t)),reqId:i})})),e.interceptors.componentFlexibleLogicInstanceMethodInterceptor.all("setData",(function(t,n){var o=e.getNextRequestId(),r=B()/1e3;return F(e,{aTime:r,args:n,context:T(U(t)),reqId:o}),[[o,r],n]}),(function(t,n,o,r){var a=n[0],i=a[0],c=a[1],s=n[1],p=B()/1e3;K(e,{aTime:c,args:s,bTime:p,context:T(U(t)),reqId:i})}))}(o),N(o),X(o),H(o)}var z,Q=function(){this.channelConfigKey="0",this.silentMode=!1,this.userAgent="undefined"!=typeof navigator?navigator.swuserAgent||navigator.userAgent:"",this.isIOS=/iPhone|iPad|iOS/i.test(this.userAgent),this.isLyra=/LyraVM/i.test(this.userAgent),this.startupParams=S(),this.channelId=this.startupParams.channelId,"string"==typeof __BUGME_EXTERNAL_CHANNEL__&&__BUGME_EXTERNAL_CHANNEL__&&(this.channelId=__BUGME_EXTERNAL_CHANNEL__,this.silentMode=!0),this.isLyra&&(this.silentMode=!0),this.startupParams.remoteCh&&(this.channelConfigKey=String(this.startupParams.remoteCh))},J=function(){function e(){this.records=new Map}return e.prototype.setRequest=function(e,t){this.records.set(e,x(x({},this.records.get(e)||{}),t))},e.prototype.getRequest=function(e){return this.records.get(e)},e.prototype.removeRequest=function(e){this.records.has(e)&&this.records.delete(e)},e}(),Y=function(){function e(e){void 0===e&&(e=[]),this._messageQueue=e,this._queueSize=0,this.isApplogEnabled=!1}return e.prototype.push=function(e){this._queueSize;var t=function(e){var t="string"==typeof e?e:JSON.stringify(e);return t.length>5e6?void y("abort send websocket message due to size:",t.length):t}(e);null!=t&&(this._messageQueue.push(t),this._queueSize+=t.length)},e.prototype.sendQueuedMessages=function(){if(0!==this._messageQueue.length){var e=ee().getWorkerSocket();e&&(this._messageQueue.forEach((function(t){return e.send(t)})),this._messageQueue=[],this._queueSize=0)}},e.prototype.setApplogEnabled=function(e){this.isApplogEnabled=e},e}(),Z=function(){function e(){}return e.prototype.getAgentContext=function(){return this.agentContext||(this.agentContext=new Q),this.agentContext},e.prototype.setWorkerSocket=function(e){this.workerSocket=e},e.prototype.getWorkerSocket=function(){return this.workerSocket},e.prototype.getNetworkRecorder=function(){return this.networkRecorder||(this.networkRecorder=new J),this.networkRecorder},e.prototype.getMessageQueue=function(){return null==this.messageQueue&&(this.messageQueue=new Y),this.messageQueue},e.prototype.setRuntime=function(e){this.runtime=e},e.prototype.getRuntime=function(){return this.runtime},e}();function ee(){return z||(z=new Z),z}function te(e){try{var t=ee().getWorkerSocket(),n=ee().getMessageQueue();t&&n.isApplogEnabled?t.send(v(e)):n.push(v(e))}catch(e){}}function ne(e){if(d.__APPX_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof d.__APPX_DEVTOOLS_GLOBAL_HOOK__[e])return d.__APPX_DEVTOOLS_GLOBAL_HOOK__[e]}var oe={0:{openchannel:"openchannel.alipay.com",hpmweb:"hpmweb.alipay.com"},1:{openchannel:"miniprogram.alipay.com",hpmweb:"hpmweb.alipay.com"},2:{openchannel:"openchannel-pre.alipay.com",hpmweb:"hpmweb-pre.alipay.com"}};var re,ae=function(){function e(e){this.url="",this.opened=!1,e&&(this.url=e),this.onSocketError=this.onSocketError.bind(this),this.onSocketClose=this.onSocketClose.bind(this),this.onSocketMessage=this.onSocketMessage.bind(this),this.onSocketOpen=this.onSocketOpen.bind(this)}return Object.defineProperty(e.prototype,"isSocketOpened",{get:function(){return this.opened},enumerable:!1,configurable:!0}),e.prototype.setUrl=function(e){this.url=e},e}();"undefined"!=typeof WebSocket&&WebSocket.OPEN&&(re=WebSocket);var ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageBeforeSocketOpen=[],t}return E(t,e),t.prototype.open=function(){var e=this;if(!this.url)throw new Error("WebSocket url required");this.socket=new re(this.url),this.socket.onopen=this.onSocketOpen,this.socket.onmessage=function(t){"string"==typeof t.data?e.onSocketMessage(t.data):console.warn("[DEBUG] invalid message",t.data)},this.socket.onclose=this.onSocketClose,this.socket.onerror=this.onSocketError},t.prototype.close=function(){this.socket&&this.socket.close()},t.prototype.sendSocketMessage=function(e){var t="string"==typeof e?e:JSON.stringify(e);t.length>5e6||(this.opened?this.socket.send(t):this.messageBeforeSocketOpen.push(t))},t.prototype.onSocketMessage=function(e){},t.prototype.onSocketOpen=function(){var e=this;this.opened=!0,this.messageBeforeSocketOpen.length&&(this.messageBeforeSocketOpen.forEach((function(t){e.sendSocketMessage(t)})),this.messageBeforeSocketOpen=[])},t.prototype.onSocketClose=function(){this.opened=!1,console.log("[DEBUG] connection closed")},t.prototype.onSocketError=function(e){console.error("[DEBUG] connection onerror",e)},t}(ae),ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageBeforeSocketOpen=[],t}return E(t,e),t.prototype.open=function(){var e=this;this.socketTask=AFAppX.bridge.connectSocket({__fromRemoteDebug:!0,url:this.url,multiple:!0,fail:function(t){e.onSocketError(t)}}),this.socketTask.onOpen((function(){e.handleSocketOpen()})),this.socketTask.onError((function(t){e.onSocketError(t.data)})),this.socketTask.onClose((function(){e.opened=!1,e.onSocketClose()})),this.socketTask.onMessage((function(t){e.opened||e.handleSocketOpen(),e.onSocketMessage(t.data.data)}))},t.prototype.sendSocketMessage=function(e){var t="string"==typeof e?e:JSON.stringify(e);t.length>5e6||(this.opened?this.socketTask.send({__fromRemoteDebug:!0,data:t,isBuffer:!1}):this.messageBeforeSocketOpen.push(t))},t.prototype.close=function(){this.opened&&this.socketTask.close({__fromRemoteDebug:!0})},t.prototype.onSocketMessage=function(e){},t.prototype.onSocketOpen=function(){},t.prototype.onSocketError=function(e){},t.prototype.onSocketClose=function(){},t.prototype.handleSocketOpen=function(){var e=this;this.opened||(this.opened=!0,this.messageBeforeSocketOpen.length&&(this.messageBeforeSocketOpen.forEach((function(t){e.sendSocketMessage(t)})),this.messageBeforeSocketOpen=[]),this.onSocketOpen())},t}(ae),se=function(e,t,n,o,r){var a,i,c=null,s=0;r||(r={});var p=function(){s=!1===r.leading?0:Date.now(),c=null,i=e.apply(null,a),a=null};return function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var g=Date.now();s||!1!==r.leading||(s=g);var f=t-(g-s);return a=u,f<=0||f>t?(o(c),c=null,s=g,i=e.apply(null,a),a=null):c||!1===r.trailing||(c=n(p,f)),i}}((function(){var e=ee().getWorkerSocket();e&&e.send({method:n.DataChanged,ext:{origin:p.Data}})}),300,setTimeout,clearTimeout,{leading:!1});function pe(){var e={onSetData:ne("onSetData"),onSetDataCallback:ne("onSetDataCallback"),onApiSyncCall:ne("onApiSyncCall"),onApiSyncCallback:ne("onApiSyncCallback"),onApiCall:ne("onApiCall"),onApiCallback:ne("onApiCallback"),onError:ne("onError")};d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onSetData=function(t){try{if(e.onSetData)try{e.onSetData.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}se(),te({method:i.SetData,params:le(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onSetDataCallback=function(t){try{if(e.onSetDataCallback)try{e.onSetDataCallback.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}te({method:i.SetDataCallback,params:t,ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiSyncCall=function(t){try{if(e.onApiSyncCall)try{e.onApiSyncCall.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}te({method:i.ApiSyncCall,params:ue(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiSyncCallback=function(t){try{if(e.onApiSyncCallback)try{e.onApiSyncCallback.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}te({method:i.ApiSyncCallback,params:ue(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiCall=function(t){try{if(e.onApiCall)try{e.onApiCall.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}te({method:i.ApiCall,params:ue(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiCallback=function(t){try{if(e.onApiCallback)try{e.onApiCallback.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}te({method:i.ApiCallback,params:ue(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onError=function(t){try{if(e.onError)try{e.onError.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){}!function(e){var t=new Error(e.formatted.message);t.stack=e.formatted.stack,setTimeout(console.error.bind(console,t))}(t)}catch(e){}},function(e){for(var t=["onPageLoad","onPageShow","onPageHide","onPageReady","onPageUnload","onPageUpdate"],n={},o=0,r=t;o<r.length;o++){n[s=r[o]]=ne(s)}for(var a=function(t){e[t]=function(e){try{if(n[t])try{n[t].call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}catch(e){y(e)}var o=e.context?e:x({route:e.page.route},e);te({method:"MiniAppLog."+t,params:ge(o),ext:{origin:p.AppLog}}),"onPageShow"===t&&se()}catch(e){}}},i=0,c=t;i<c.length;i++){var s;a(s=c[i])}}(d.__APPX_DEVTOOLS_GLOBAL_HOOK__),function(e){for(var t=["onAppLaunch","onAppShow","onAppHide","onAppError","onAppUnhandledRejection"],n={},o=0,r=t;o<r.length;o++){n[s=r[o]]=ne(s)}for(var a=function(t){e[t]=function(e){try{if(n[t])try{n[t].call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}catch(e){y(e)}te({method:"MiniAppLog."+t,params:e,ext:{origin:p.AppLog}})}catch(e){}}},i=0,c=t;i<c.length;i++){var s;a(s=c[i])}}(d.__APPX_DEVTOOLS_GLOBAL_HOOK__)}function ue(e){if(e.context){var t=e.context;return x(x({},e),{context:fe(t,["apiName","extraInfo","isMiniExtension","option","startTime","taskId","__reqId"])})}return e}function le(e){return e.context?e:{pagePath:e.isPage?e.page.route:e.component.$page.route,isPage:e.isPage,option:e.options,componentIs:e.component?e.component.is:void 0}}function ge(e){return x(x({},e),{page:fe(e.page,["$id","$page","$viewId","data"])})}function fe(e,t){var n={};return t.forEach((function(t){n[t]=e[t]})),n}function de(e){if(d.__APPX_DEVTOOLS_GLOBAL_HOOK__&&d.__APPX_DEVTOOLS_GLOBAL_HOOK__[e]&&"function"==typeof d.__APPX_DEVTOOLS_GLOBAL_HOOK__[e])return d.__APPX_DEVTOOLS_GLOBAL_HOOK__[e]}function he(){null==d.__APPX_DEVTOOLS_GLOBAL_HOOK__&&(d.__APPX_DEVTOOLS_GLOBAL_HOOK__={});var e={onSetData:de("onSetData"),onSetDataCallback:de("onSetDataCallback"),onApiSyncCall:de("onApiSyncCall"),onApiSyncCallback:de("onApiSyncCallback"),onApiCall:de("onApiCall"),onApiCallback:de("onApiCallback"),onError:de("onError")};d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onSetData=function(t){try{if(e.onSetData)try{e.onSetData.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}se(),_e({method:i.SetData,params:me(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onSetDataCallback=function(t){try{if(e.onSetDataCallback)try{e.onSetDataCallback.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}_e({method:i.SetDataCallback,params:t,ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiSyncCall=function(t){try{if(e.onApiSyncCall)try{e.onApiSyncCall.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}_e({method:i.ApiSyncCall,params:ye(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiSyncCallback=function(t){try{if(e.onApiSyncCallback)try{e.onApiSyncCallback.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}_e({method:i.ApiSyncCallback,params:ye(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiCall=function(t){try{if(e.onApiCall)try{e.onApiCall.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}_e({method:i.ApiCall,params:ye(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiCallback=function(t){try{if(e.onApiCallback)try{e.onApiCallback.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}_e({method:i.ApiCallback,params:ye(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onError=function(t){try{if(e.onError)try{e.onError.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){}!function(e){var t=new Error(e.formatted.message);t.stack=e.formatted.stack,setTimeout(console.error.bind(console,t))}(t)}catch(e){}},function(e,t){t.onPageLifecycle=de("onPageLifecycle"),e.onPageLifecycle=function(e){try{if(t.onPageLifecycle)try{t.onPageLifecycle.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}catch(e){y(e)}var n=function(e){var t;switch(e){case 0:t="onPageLoad";break;case 2:t="onPageReady";break;case 1:t="onPageShow";break;case 3:t="onPageHide";break;case 4:t="onPageUnload"}return t}(e.args[0]);if(!n)return;_e({method:"MiniAppLog."+n,params:e,ext:{origin:p.AppLog}}),"onPageShow"===n&&se()}catch(e){}}}(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e),function(e,t){t.onAppLifecycle=de("onAppLifecycle"),e.onAppLifecycle=function(e){try{if(t.onAppLifecycle)try{t.onAppLifecycle.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}catch(e){y(e)}_e({method:"MiniAppLog."+e.args[0],params:e,ext:{origin:p.AppLog}})}catch(e){}}}(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}function _e(e){try{var t=ee().getWorkerSocket(),n=ee().getMessageQueue();t&&n.isApplogEnabled?t.send(v(e)):n.push(v(e))}catch(e){}}function ye(e){if(e.context){var t=e.context;return x(x({},e),{context:Oe(t,["apiName","extraInfo","isMiniExtension","option","startTime","taskId","__reqId"])})}return e}function me(e){return e.context?e:{pagePath:e.isPage?e.page.route:e.component.$page.route,isPage:e.isPage,option:e.options,componentIs:e.component?e.component.is:void 0}}function Oe(e,t){var n={};return t.forEach((function(t){n[t]=e[t]})),n}function Ae(e){return Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors(e):Object.getOwnPropertyNames(e).reduce((function(t,n){return t[n]=Object.getOwnPropertyDescriptor(e,n),t}),Object.create(null))}var Se,be=function(){function e(e){this.objectStore=e}return e.prototype.mapFrom=function(e){var t=this;return Array.from(e).map((function(e){return t.mapFromOne(e)}))},e.prototype.mapFromOne=function(e){switch(typeof e){case"string":return this.mapString(e);case"number":return this.mapNumber(e);case"object":return Array.isArray(e)?this.mapArray(e):null===e?this.mapNull():this.mapObject(e);case"function":return this.mapFunction(e);case"undefined":return this.mapUndef();case"boolean":return this.mapBoolean(e);default:return{type:typeof e,value:e}}},e.prototype.mapString=function(e){return{type:"string",value:e}},e.prototype.mapNumber=function(e){return{type:"number",value:e,description:String(e)}},e.prototype.mapBoolean=function(e){return{type:"boolean",value:e}},e.prototype.mapFunction=function(e){var t=this.objectStore.save(e);return{type:"function",className:"Function",description:e.toString(),objectId:t}},e.prototype.mapUndef=function(){return{type:"undefined"}},e.prototype.mapNull=function(){return{type:"object",subtype:"null",value:null}},e.prototype.mapObject=function(e){var t,n,o=this,r=Ae(e),a=Object.keys(r),i=this.objectStore.save(e),c=e.constructor?e.constructor.name:"Object",s={type:"object",className:c,description:c,objectId:i,preview:{type:"object",description:c,overflow:a.length>5,properties:a.slice(0,5).map((function(e){return o.mapObjectProperty(e,r[e])})).filter(Boolean)}};return e instanceof Error?(t="error",n=e.stack):e instanceof Date?(t="date",n=e.toString()):e instanceof RegExp?(t="regexp",n=e.toString()):e instanceof Promise&&(t="promise",n="Promise"),t&&(s.subtype=t,s.preview&&(s.preview.subtype=t)),n&&(s.description=n,s.preview&&(s.preview.description=n)),s},e.prototype.mapArray=function(e){var t="Array("+e.length+")";return{type:"object",subtype:"array",className:"Array",description:t,objectId:this.objectStore.save(e),preview:{type:"object",subtype:"array",description:t,overflow:!1,properties:this.mapArrayProperties(e)}}},e.prototype.mapArrayProperties=function(e){return e.map((function(e,t){if("function"==typeof e)return{name:String(t),type:"function",value:""};var n={name:String(t),type:typeof e,value:"object"==typeof e&&e?e.constructor&&e.constructor.name||"Object":String(e)};return null===e?n.subtype="null":Array.isArray(e)&&(n.subtype="array"),n}))},e.prototype.mapObjectProperty=function(e,t){if(t.get)return{name:e,type:"accessor"};if(!t.set){var n=t.value;switch(typeof n){case"object":return Array.isArray(n)?{name:e,type:"object",subtype:"array",value:"Array("+n.length+")"}:null===n?{name:e,type:"object",subtype:"null",value:"null"}:{name:e,type:"object",value:n.constructor?n.constructor.name:"Object"};case"function":return{type:"function",value:"",name:e};default:return{name:e,type:typeof n,value:String(n)}}}},e}(),ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.mapFrom=function(e){var t=this;return e.split("\n").slice(2).map((function(e,n){return t.testType1(e)?t.extractType1(e):t.testType2(e)?t.extractType2(e):void 0})).filter((function(e){return null!=e}))},t}(function(){function e(){this.e1=/\s*at\s(\S+)\s(\S+)\:(\d+)\:(\d+)\)/,this.e2=/\s*at\s(\S+)\:(\d+)\:(\d+)/}return e.prototype.testType1=function(e){return this.e1.test(e)},e.prototype.testType2=function(e){return this.e2.test(e)},e.prototype.extractType1=function(e){var t=e.match(this.e1);return null==t?null:{functionName:t[1],url:t[2].slice(1),lineNumber:Number(t[3]),columnNumber:Number(t[4])}},e.prototype.extractType2=function(e){var t=e.match(this.e2);return null==t?null:{functionName:"",url:t[1].slice(1),lineNumber:Number(t[2]),columnNumber:Number(t[3])}},e}()),ve=function(){function e(){this.id=0,this.id2Object=new Map,this.object2Id=new Map}return e.prototype.save=function(e){if(this.object2Id.has(e))return this.object2Id.get(e);var t=this.getNextObjectId();return this.id2Object.set(t,e),this.object2Id.set(e,t),t},e.prototype.query=function(e){return this.id2Object.get(e)},e.prototype.clear=function(e){var t=this.id2Object.get(e);t&&(this.id2Object.delete(e),this.object2Id.delete(t))},e.prototype.clearAll=function(){this.id2Object.clear(),this.object2Id.clear()},e.prototype.getNextObjectId=function(){return this.id++,'{"injectedScriptId":1,"id":'+this.id+"}"},e}(),Le=function(){function e(e,t){this.objectStore=e,this.objectMapper=t}return e.prototype.handle=function(e){var t=this.objectStore.query(e.objectId);return t?{result:this.mapObject(t,Boolean(e.ownProperties),Boolean(e.accessorPropertiesOnly))}:{result:[]}},e.prototype.mapObject=function(e,t,n){var o=this;if(t){var r=Ae(e),a=Object.keys(r).filter((function(e){return!(n&&!r[e].get&&!r[e].set)})).map((function(e){return o.mapResultOne(e,r[e],!0)}));return e.__proto__&&a.push(this.mapResultOne("__proto__",{configurable:!0,enumerable:!1,writable:!0,value:e.__proto__},!0)),a}for(var i=[],c={},s=e,p=!1,u=!0,l=function(){var e=Ae(s);if(Object.keys(e).forEach((function(t){if(!c[t]){c[t]=!0;var r=e[t];(!n||r.get||r.set)&&i.push(o.mapResultOne(t,r,u))}})),!p){var t=Object.getOwnPropertyDescriptor(s,"__proto__");t&&(p=!0,i.push(g.mapResultOne("__proto__",t,u)))}s=s.__proto__,u=!1},g=this;s;)l();return i},e.prototype.mapResultOne=function(e,t,n){var o={writable:t.writable,configurable:Boolean(t.configurable),enumerable:Boolean(t.enumerable),isOwn:n,name:String(e)};return"value"in t&&(o.value=this.objectMapper.mapFromOne(t.value)),t.get&&(o.get=this.objectMapper.mapFromOne(t.get)),t.set&&(o.set=this.objectMapper.mapFromOne(t.set)),o},e}(),Pe=function(){function e(){this.objectStore=new ve,this.objectMapper=new be(this.objectStore),this.callFramesMapper=new ke,this.getPropertiesHandler=new Le(this.objectStore,this.objectMapper)}return e.prototype.parseObject=function(e){return this.objectMapper.mapFromOne(e)},e.prototype.getProperties=function(e){return this.getPropertiesHandler.handle(e)},e.prototype.getObjectById=function(e){return this.objectStore.query(e)},e.prototype.consoleAPICalled=function(e,t,n){var o=e;return"warn"===e&&(o="warning"),{method:"Runtime.consoleAPICalled",params:{type:o,args:this.objectMapper.mapFrom(n),executionContextId:1,timestamp:Date.now(),stackTrace:{callFrames:this.callFramesMapper.mapFrom(t)}}}},e}();function Ce(){("string"==typeof __BUGME_EXTERNAL_CHANNEL__&&__BUGME_EXTERNAL_CHANNEL__||"boolean"==typeof __BUGME_CONSOLE_ENABLE__&&__BUGME_CONSOLE_ENABLE__)&&(Se=new xe).overrideConsole()}function De(){return Se}var Ee,xe=function(){function e(){this.executionContextId=1,this.messageBeforeAgentInit=[],this.webSocketCheckingLoop=!1,this.parser=new Pe,this.createExecutionContext()}return e.prototype.createExecutionContext=function(){this.sendMesasge({method:c.executionContextsCleared,params:{}}),this.sendMesasge({method:c.executionContextCreated,params:{context:{id:this.executionContextId,origin:"app://",name:"app"}}})},e.prototype.overrideConsole=function(){var e=this;Object.defineProperties(console,["debug","log","info","warn","error"].reduce((function(t,n){var o=console[n].bind(console);return t[n]={value:function(){var t=arguments;if(t.length){try{var r=/^(\[framework\]|dispatchEvent|onMessage push|unsupported protocol)/;if("string"==typeof t[0]&&r.test(t[0]))return o.apply(null,t);var a=new Error;a.stack&&e.sendMesasge(e.parser.consoleAPICalled(n,a.stack,t))}catch(e){}return o.apply(null,t)}}},t}),{}))},e.prototype.sendMesasge=function(e){var t=ee().getWorkerSocket();t?(this.flushPendingMessasges(),t.sendAfterReceivingMessage(e)):(this.messageBeforeAgentInit.push(e),this.checkWebSocketReady())},e.prototype.flushPendingMessasges=function(){if(this.messageBeforeAgentInit.length){var e=ee().getWorkerSocket();e&&(this.messageBeforeAgentInit.forEach((function(t){e.sendAfterReceivingMessage(t)})),this.messageBeforeAgentInit=[])}},e.prototype.checkWebSocketReady=function(){var e=this;if(!this.webSocketCheckingLoop){this.webSocketCheckingLoop=!0;var t=setInterval((function(){ee().getWorkerSocket()&&(clearInterval(t),e.flushPendingMessasges())}),1e3)}},e}();function we(e){if(ee().getAgentContext().silentMode)return!1;var t="";switch(e){case Ee.Connecting:t="准备中";break;case Ee.Connected:t="已连接";break;case Ee.Reconnecting:t="重试中";break;case Ee.Disconnected:t="已断开"}e===Ee.Reconnecting&&(e=Ee.Connecting),AFAppX.bridge.call("showRemoteDebugPanel",{status:e,text:"真机调试"+t,buttonTitle:"退出"})}!function(e){e.Connecting="connecting",e.Connected="connected",e.Disconnected="disconnected",e.Reconnecting="reconnecting"}(Ee||(Ee={}));var Ie=Object.freeze({__proto__:null,enable:function(e){ee().getWorkerSocket().send({id:e.id,result:{}})},getResponseBody:function(e){var t=e.params.requestId,n=ee(),o=n.getNetworkRecorder(),r=o.getRequest(t);r?n.getWorkerSocket().send({id:e.id,result:{base64Encoded:r.isBase64Body,body:r.responseBody}}):n.getWorkerSocket().send({id:e.id,result:{}}),o.removeRequest(t)}});var Te="function"==typeof __eval?__eval:"function"==typeof eval?eval:function(){};var Re=Object.freeze({__proto__:null,enable:function(e){ee().getWorkerSocket().send({id:e.id,result:{}});var t=De();t&&t.createExecutionContext()},getProperties:function(e){var t=De();t&&ee().getWorkerSocket().send({id:e.id,result:t.parser.getProperties(e.params)})},compileScript:function(e){ee().getWorkerSocket().send({id:e.id,result:{}})},evaluate:function(e){var t=De();if(t){var n=t.parser;try{var o=Te(e.params.expression);ee().getWorkerSocket().send({id:e.id,result:{result:n.parseObject(o)}})}catch(t){t.stack=t.name+": "+t.message,ee().getWorkerSocket().send({id:e.id,result:{exceptionDetails:{columnNumber:20,exception:n.parseObject(t),exceptionId:1,lineNumber:0,text:"Uncaught"},result:n.parseObject(t)}})}}}});var Be,Ne=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){function n(e,t){var n=[],o=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+o.slice(0,n.indexOf(t)).join(".")+"]"}),function(r,a){if(n.length>0){var i=n.indexOf(this);~i?n.splice(i+1):n.push(this),~i?o.splice(i,1/0,r):o.push(r),~n.indexOf(a)&&(a=t.call(this,r,a))}else n.push(a);return null==e?a:e.call(this,r,a)}}(e.exports=function(e,t,o,r){return JSON.stringify(e,n(t,r),o)}).getSerialize=n}));Ne.getSerialize;function Me(){return Be?Be():d.getCurrentPages?(Be=d.getCurrentPages)():d.AFAppX&&AFAppX.getCurrentPages?(Be=AFAppX.getCurrentPages)():[]}var je=Object.freeze({__proto__:null,getPagesData:function(e){var t;function n(){return Me().filter(Boolean).map((function(e){return{viewId:e.$viewId,data:Ne(e.data),route:e.route}}))}if(b()){var o=ee().getRuntime();t=null==o?n():o.getNav().currentStack.map((function(e){var t=e.getPageLogicInstance().publicInstance;return{viewId:t.$viewId,data:Ne(t.data),route:t.route}}))}else t=n();ee().getWorkerSocket().send({id:e.id,ext:e.ext,result:{data:t}})},setPageData:function(e){var t,n=e.params,o=void 0===n?{}:n,r=o.viewId,a=o.data;function i(){return Me().filter((function(e){return e&&""+e.$viewId===r}))[0]}if(b()){var c=ee().getRuntime();t=null==c?c.getNav().currentStack.map((function(e){return e.getPageLogicInstance().publicInstance})).filter((function(e){return e&&""+e.$viewId===r}))[0]:i()}else t=i();t&&a&&t.setData(a)}});var Xe=Object.freeze({__proto__:null,getStorageInfo:function(e){var t=AFAppX.bridge.getStorageInfoSync(),n=t.keys.map((function(e){var t=AFAppX.bridge.getStorageSync({key:e}).data;return{key:e,value:t,type:typeof t}}));ee().getWorkerSocket().send({id:e.id,ext:e.ext,result:{currentSize:t.currentSize,limitSize:t.limitSize,data:n}})},clearStorage:function(e){AFAppX.bridge.clearStorageSync()},removeStorage:function(e){var t=e.params,n=void 0===t?{}:t;n.key&&AFAppX.bridge.removeStorageSync({key:n.key})},setStorage:function(e){var t=e.params,n=void 0===t?{}:t;n.key&&AFAppX.bridge.setStorageSync({key:n.key,data:n.value})}});var Ge=Object.freeze({__proto__:null,enable:function(){var e=ee().getMessageQueue();e.setApplogEnabled(!0),e.sendQueuedMessages()}});var qe=Object.freeze({__proto__:null,Data:je,Storage:Xe,Applog:Ge,ping:function(e){ee().getWorkerSocket().send({id:e.id,result:{}})},getSystemInfo:function(e){var t=AFAppX.bridge.getSystemInfoSync(),n={userAgent:ee().getAgentContext().userAgent,sdkVersion:AFAppX.bridge.SDKVersion,alipayVersion:t.version,model:t.model,system:t.system};ee().getWorkerSocket().send({id:e.id,result:n})},getStartupParams:function(e){var t=S();ee().getWorkerSocket().send({id:e.id,result:t})}});var He=Object.freeze({__proto__:null,getResourceTree:function(e){ee().getWorkerSocket().send({id:e.id,result:{}})}}),Fe=Object.freeze({__proto__:null,Network:Ie,Runtime:Re,Tiny:qe,Page:He}),Ke=!1;if("undefined"!=typeof WebSocket&&WebSocket.OPEN){Ke=!0;try{delete d.WebSocket}catch(_){}}var Ve=function(e){function t(t){var n=e.call(this,t)||this;return n.isMessageReceived=!1,n.isSocketOpenedOnce=!1,n.messageBeforeReceived=[],n.isDebugExited=!1,we(Ee.Connecting),n}return E(t,e),t.prototype.send=function(e){return this.sendSocketMessage(e)},t.prototype.sendAfterReceivingMessage=function(e){this.isMessageReceived?this.send(e):this.messageBeforeReceived.push("string"==typeof e?e:JSON.stringify(e))},t.prototype.exitDebug=function(){this.isDebugExited=!0,we(Ee.Disconnected),this.close(),!Ke&&ee().getAgentContext().isIOS&&[1,2].forEach((function(e){AFAppX.bridge.call("closeSocket",{socketTaskId:e})}))},t.prototype.onSocketOpen=function(){e.prototype.onSocketOpen.call(this),this.isSocketOpenedOnce=!0,clearInterval(this.reconnectInterval),this.send({method:a.Enable,params:{},ext:{origin:p.AppLog}}),se()},t.prototype.onSocketClose=function(){e.prototype.onSocketClose.call(this),this.isDebugExited||this.reconnect()},t.prototype.onSocketError=function(e){this.isSocketOpenedOnce||ee().getAgentContext().silentMode||(we(Ee.Disconnected),AFAppX.bridge.showToast({content:"本次真机调试已结束，请重新生成调试版本",duration:2e3,success:function(){}}))},t.prototype.onSocketMessage=function(e){var t,n=this;this.isMessageReceived||(this.isMessageReceived=!0,this.messageBeforeReceived.forEach((function(e){n.send(e)})),this.messageBeforeReceived=[]);try{t=JSON.parse(e)}catch(t){return void("CLIENT:JOIN"===e?we(Ee.Connected):"CLIENT:LEAVE"===e&&this.exitDebug())}var o=function(e){if(!e)return;for(var t=e.split("."),n=Fe,o=0,r=t;o<r.length;o++){var a=r[o];if(!(n=n[a]))break}return n}(t.method);o?o(t):this.send({id:t.id,error:{code:-32e3,message:"unsupported"}})},t.prototype.reconnect=function(){var e=this;we(Ee.Reconnecting),clearInterval(this.reconnectInterval),this.reconnectInterval=setInterval((function(){e.isSocketOpened?clearInterval(e.reconnectInterval):e.open()}),2e3)},t}(Ke?ie:ce);var We=/\/(tyro\/agent|bugme\/channel\/paused)$/,Ue=function(){function t(){this.isIOS=ee().getAgentContext().isIOS,this.isLyra=ee().getAgentContext().isLyra}return t.prototype.setup=function(){this.isLyra||this.isIOS?this.listenDebugEvent4IOS():this.listenDebugEvent()},t.prototype.onNetworkRequest=function(e){if(!We.test(e.url)){var t=(e.method||"GET").toUpperCase(),n=$e(e.headers),o={method:s.RequestWillBeSent,params:{documentURL:"",loaderId:"",requestId:e.requestId,request:{method:t,url:e.url,headers:n,postData:e.postBody,mixedContentType:"none",initialPriority:"HIGH",isLinkPreload:!1},timestamp:ze(),type:"XHR"}},r=ee();r.getWorkerSocket().send(o),r.getNetworkRecorder().setRequest(e.requestId,{method:t,requestHeaders:n,url:e.url})}},t.prototype.onNetworkResponse=function(e){if(!We.test(e.url)){var t=ee(),n=t.getNetworkRecorder().getRequest(e.requestId)||{},o={method:s.ResponseReceived,params:{requestId:e.requestId,loaderId:"",type:"XHR",timestamp:ze(),response:{url:n.url||"",status:e.status,method:n.method||"",headers:$e(e.headers),requestHeaders:n.requestHeaders,connectionReused:!1,encodedDataLength:0,securityState:"unknown",statusText:"",protocol:"",mimeType:e.headers["Content-Type"]||e.headers["content-type"]}}};t.getWorkerSocket().send(o);var r={method:s.LoadingFinished,params:{requestId:e.requestId,timestamp:ze(),encodedDataLength:0}};t.getWorkerSocket().send(r),t.getNetworkRecorder().setRequest(e.requestId,{responseBody:e.body,isBase64Body:!1})}},t.prototype.onNetworkError=function(e){if(!We.test(e.url)){var t={method:s.LoadingFailed,params:{canceled:!1,errorText:e.errorMsg||"",requestId:e.requestId,timestamp:ze(),type:"XHR"}};ee().getWorkerSocket().send(t)}},t.prototype.onStorageChanged=function(e){var t={};Object.keys(e.data).forEach((function(n){try{t[n]=JSON.parse(e.data[n]).APDataStorage}catch(e){}})),ee().getWorkerSocket().send({method:r.StorageChanged,params:{data:t},ext:{origin:p.Storage}})},t.prototype.listenDebugEvent4IOS=function(){var t=this,n=AFAppX.bridge;n.on(e.DebugNetworkRequest,(function(e){t.onNetworkRequest(e.data)})),n.on(e.DebugNetworkResponse,(function(e){t.onNetworkResponse(e.data)})),n.on(e.DebugNetworkError,(function(e){t.onNetworkError(e.data)})),n.on(e.DebugStorageChanged,(function(e){t.onStorageChanged(e.data)}))},t.prototype.listenDebugEvent=function(){var t=this;AFAppX.bridge.on(e.DebugConsole,(function(n){var o,r=n.data,a=r.type,i=r.content;try{o=JSON.parse(i)}catch(e){return}switch(a){case e.DebugNetworkRequest:t.onNetworkRequest(o);break;case e.DebugNetworkResponse:t.onNetworkResponse(o);break;case e.DebugNetworkError:t.onNetworkError(o);break;case e.DebugStorageChanged:t.onStorageChanged(o)}}))},t}();function $e(e){if(!e||"object"!=typeof e)return{};var t={};return Object.keys(e).forEach((function(n){t[n]=""+e[n]})),t}function ze(){return Date.now()/1e3}var Qe,Je=function(){function t(){this.inited=!1}return t.prototype.setup=function(){if(this.inited)return!1;var t=AFAppX.bridge;if(/^1\./.test(t.SDKVersion)){var n=function(e,t,n,o){var r;return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];o(r),r=n((function(){e.apply(null,a)}),t)}}(this.onPageResumeOrPause.bind(this),300,setTimeout,clearTimeout);t.on(e.PageResume,n),t.on(e.PagePause,n)}t.on(e.DebugPanelClick,this.onDebugPanelClick),this.debugEventListener=new Ue,this.debugEventListener.setup(),this.inited=!0},t.prototype.onPageResumeOrPause=function(){se()},t.prototype.onDebugPanelClick=function(){var e=ee().getWorkerSocket();e&&e.exitDebug()},t}();var Ye,Ze=function(){function e(){}return e.prototype.init=function(){(Qe||(Qe=new Je),Qe).setup(),this.makeConnection(),this.printSDKVersion()},e.prototype.makeConnection=function(){var e=ee(),t=function(){if("string"==typeof __BUGME_EXTERNAL_WORKER_URL__&&__BUGME_EXTERNAL_WORKER_URL__)return __BUGME_EXTERNAL_WORKER_URL__;var e=ee().getAgentContext(),t=e.channelId,n=e.channelConfigKey;return"wss://"+(oe[n]||oe[0]).hpmweb+"/bugme/client_w/"+t}(),n=new Ve(t);e.setWorkerSocket(n),e.getAgentContext().isIOS?n.open():setTimeout((function(){n.open()}),1200)},e.prototype.printSDKVersion=function(){var e=AFAppX.bridge.SDKVersion;/^2\./.test(e)&&setTimeout(console.log.bind(console,"SDKVersion: "+e))},e}();var et="object"==typeof AFAppX&&AFAppX.Plugin;if(!d.__BUGME_ON__&&!et){d.__BUGME_ON__=!0;try{!function(){try{!function(){if(null==d.__APPX_DEVTOOLS_GLOBAL_HOOK__&&(d.__APPX_DEVTOOLS_GLOBAL_HOOK__={}),b()){he();var e=ne("setup");d.__APPX_DEVTOOLS_GLOBAL_HOOK__.setup=function(t,n){if(e&&"function"==typeof e)try{e(t,n)}catch(e){}ee().setRuntime(t),$(0,n,(function(e){"string"==typeof e.method&&e.method.includes("MiniAppLog")?te(e):ee().getWorkerSocket().send(e)}))}}else pe()}(),Ce(),(t=Object.getOwnPropertyDescriptor(d,"requirePlugin"))&&!t.configurable||(t&&(e=d.requirePlugin),Object.defineProperty(d,"requirePlugin",{get:function(){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=Date.now();te({method:i.ApiSyncCall,params:{aTime:o,context:{apiName:"requirePlugin",option:{arguments:t}}},ext:{origin:p.AppLog}});try{var r=e.apply(void 0,t);return te({method:i.ApiSyncCallback,params:{args:r?void 0:[{error:1,errorMessage:"未找到对应插件"}],bTime:Date.now()===o?o+.01:Date.now(),context:{apiName:"requirePlugin"}},ext:{origin:p.AppLog}}),r}catch(e){throw te({method:i.ApiSyncCallback,params:{args:[{error:2,errorMessage:e.message}],bTime:Date.now()===o?o+.01:Date.now(),context:{apiName:"requirePlugin"}},ext:{origin:p.AppLog}}),e}}},set:function(t){e=t},enumerable:!0,configurable:!0}))}catch(e){_("sync task error",e)}var e,t,n;n=function(){!function(e){if("undefined"==typeof AFAppX&&(AFAppX=d.AFAppX),"undefined"==typeof $AppxFramework)e();else if(AFAppX.Plugin){var t=AFAppX.Plugin;AFAppX.Plugin=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=n[0];if("object"==typeof r&&r.run){var a=r.run;r.run=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(),a.apply(r,t)}}return t.apply(AFAppX,n)}}else if($AppxFramework.bootstrapInAppContextByProtocol){var n=$AppxFramework.bootstrapInAppContextByProtocol;$AppxFramework.bootstrapInAppContextByProtocol=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var r=t[0];if("object"==typeof r&&r.callback){var a=r.callback;r.callback=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(),a.apply(r,t)}}return n.apply($AppxFramework,t)}}}((function(){try{(Ye||(Ye=new Ze),Ye).init()}catch(e){_("init agent error",e)}}))},void 0!==d.AFAppX?n():(A.push(n),O||(O=!0,d.importScripts=function(e){m(e),/af-appx\.worker\.min\.js$/.test(e)&&(A.forEach((function(e){return e()})),A=[])}))}()}catch(e){_("init error",e)}}}();
 /**! __BUGME_END__ */
if(!self.__appxInited) {
self.__appxInited = 1;


require('./config$');
require('./importScripts$');

var AFAppX = self.AFAppX;
self.getCurrentPages = AFAppX.getCurrentPages;
self.getApp = AFAppX.getApp;
self.Page = AFAppX.Page;
self.App = AFAppX.App;
self.my = AFAppX.bridge || AFAppX.abridge;
self.abridge = self.my;
self.Component = AFAppX.WorkerComponent || function(){};
self.$global = AFAppX.$global;
self.requirePlugin = AFAppX.requirePlugin;


if(AFAppX.registerApp) {
  AFAppX.registerApp({
    appJSON: appXAppJson,
  });
}



function success() {
require('../../app');
require('../../pages/index/index?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
}
self.bootstrapApp ? self.bootstrapApp({ success }) : success();
}